## WebRTC
- web Real TIme Communication.

- Find a peer to peer path exchange video and audio in an effiecient and low latency manner.
- standard API 
- Enable rich commnunication browser ,mobile ,IOT device.

A wants to connect to B. A finds out all possible ways the public can connnect to it.
B finds out all possible ways the public can connnect to it. A and B signal this session information via other means Whatsapp,qr tweet ,websockets http fetch.

a connects to via most optimal path. A and B also exchanges their supported media and sercurity.


## WebRTC Demystified

### Network Address Transltion(NAT)
 
 local computer -> router -> server IP
 |Internal IP|Internale Port| External IP |External Port|Destination IP|Destination Port|
 ---------------------------------------------------------------------------------------
 |10.0.0.2|8080|5.5.5.5|3333|4.4.4.4|80|
 
### NAT Translation Method
- One to One (Full-cone NAT) : Packets to external IP: Port on the router always maps to interla  IP Port worthout exceptions.
- Address restricted NAT
- Port restricted NAT
- Symmetric NAT

### Session Traversal Utilities for NAT(STUN)
- Session Traversal utilites for NAT
- Tell me my Public ip address port through NAT
- Works for full-cone Port/Address restricted NAT
- Doesn't work for symmetric NAT
- Stun server port 3478,5349 for TLS.
- chap to maintain

### Traversal Using Relays around NAT(TURN)
- Incase of symmetric NAT we use TURN
- It's just a server that relays packets 
- turn default server port 3478,5349 for TLS
- Expensive to maintain and run

### Interactivity Connectivity Establishment(ICE )
- ICE collects all available candidates (local IP addresses reflexive addresses)- STUN ones and relayes addreses-TURN Ones
- Called ice candidates.
- All the collected addresses are then sent to the remote peer via sdp 

### Session Description Protocol(SDP)
- A format that describes ice candidates,networking options,media options,security options and other stuff 
- Not really a protocol its format
- most important concept in WebRTC
- The goal is to take the sdp generated by a user and send it somehow to the other guy
 
###  Signaling
- SDP Signalling 
- Send the SDP that we just generated somehow to the party we wish to communicate woth
- Signalling can be done via a tweet QR Code whatsapp websockets http request. 


## WebRTC DEMO
const lc= new RTCPeerConnection()
const dc=lc.createDataChannel('channel')
dc.onmessage=e=>console.log('just got a message'+e.data);
dc.onopen=e=>console.log('connection open')

// finding ice candiate

lc.onicecandidate=e=>console.log('ice candidate reprinting sdp'+JSON.stringify(lc.localDescription))

lc.createOffer().then(o=>lc.setLocalDescription(o)).then(a=>console.log('set successfully'));


###

const rc= new RTCPeerConnection()

rc.onicecandidate=e=>console.log('ice candidate reprinting sdp'+JSON.stringify(rc.localDescription))

rc.ondatachannel=e=>{
rc.dc=e.channel;
rc.dc.onmessage=e=>console.log('new message'+e.data);
rc.dc.onopen=e=console.log('connection opened')
}
rc.setRemoteDescription(offer).then(a=>console.log('dane'))
